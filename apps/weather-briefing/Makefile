# Weather Briefing Makefile
# Aviation weather briefing with AI-powered analysis (TypeScript/Node.js)

.PHONY: help install build start stop clean test lint

PORT ?= 3002

help:
	@echo "Weather Briefing - Available Commands:"
	@echo ""
	@echo "  make start       - Install dependencies, build, and start the service"
	@echo "  make install     - Install Node.js dependencies"
	@echo "  make build       - Build TypeScript to JavaScript"
	@echo "  make stop        - Stop the running service"
	@echo "  make clean       - Remove all build artifacts and dependencies"
	@echo "  make test        - Run tests"
	@echo "  make lint        - Run linting checks"
	@echo ""
	@echo "Port Configuration:"
	@echo "  PORT = $(PORT) (Service port)"
	@echo ""
	@echo "Usage:"
	@echo "  make start                    # Start on default port $(PORT)"
	@echo "  PORT=4002 make start          # Start on custom port"

install:
	@echo "ğŸ“¦ Installing dependencies for Weather Briefing..."
	npm install
	@echo "âœ… Dependencies installed!"

build: install
	@echo "ğŸ”¨ Building Weather Briefing..."
	npm run build
	@echo "âœ… Build complete!"

start: build
	@echo "ğŸš€ Starting Weather Briefing on port $(PORT)..."
	@echo ""
	@echo "ğŸŒ Service: http://localhost:$(PORT)"
	@echo ""
	@echo "Press Ctrl+C to stop the service"
	PORT=$(PORT) npm start

stop:
	@echo "ğŸ›‘ Stopping Weather Briefing..."
	@pkill -f "node.*weather-briefing" || true
	@echo "âœ… Service stopped!"

clean:
	@echo "ğŸ§¹ Cleaning Weather Briefing..."
	rm -rf node_modules
	rm -rf dist
	rm -f tsconfig.tsbuildinfo
	@echo "âœ… Cleanup complete!"

test:
	@echo "ğŸ§ª Running Weather Briefing tests..."
	npm test
	@echo "âœ… Tests complete!"

lint:
	@echo "ğŸ” Running Weather Briefing linting..."
	npm run lint
	@echo "âœ… Linting complete!"
