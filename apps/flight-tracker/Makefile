# Flight Tracker Makefile
# Real-time flight tracking service (TypeScript/Node.js)

.PHONY: help install build start stop clean test lint

PORT ?= 3001

help:
	@echo "Flight Tracker - Available Commands:"
	@echo ""
	@echo "  make start       - Install dependencies, build, and start the service"
	@echo "  make install     - Install Node.js dependencies"
	@echo "  make build       - Build TypeScript to JavaScript"
	@echo "  make stop        - Stop the running service"
	@echo "  make clean       - Remove all build artifacts and dependencies"
	@echo "  make test        - Run tests"
	@echo "  make lint        - Run linting checks"
	@echo ""
	@echo "Port Configuration:"
	@echo "  PORT = $(PORT) (Service port)"
	@echo ""
	@echo "Usage:"
	@echo "  make start                    # Start on default port $(PORT)"
	@echo "  PORT=4001 make start          # Start on custom port"

install:
	@echo "ğŸ“¦ Installing dependencies for Flight Tracker..."
	npm install
	@echo "âœ… Dependencies installed!"

build: install
	@echo "ğŸ”¨ Building Flight Tracker..."
	npm run build
	@echo "âœ… Build complete!"

start: build
	@echo "ğŸš€ Starting Flight Tracker on port $(PORT)..."
	@echo ""
	@echo "ğŸŒ Service: http://localhost:$(PORT)"
	@echo ""
	@echo "Press Ctrl+C to stop the service"
	PORT=$(PORT) npm start

stop:
	@echo "ğŸ›‘ Stopping Flight Tracker..."
	@pkill -f "node.*flight-tracker" || true
	@echo "âœ… Service stopped!"

clean:
	@echo "ğŸ§¹ Cleaning Flight Tracker..."
	rm -rf node_modules
	rm -rf dist
	rm -f tsconfig.tsbuildinfo
	@echo "âœ… Cleanup complete!"

test:
	@echo "ğŸ§ª Running Flight Tracker tests..."
	npm test
	@echo "âœ… Tests complete!"

lint:
	@echo "ğŸ” Running Flight Tracker linting..."
	npm run lint
	@echo "âœ… Linting complete!"
